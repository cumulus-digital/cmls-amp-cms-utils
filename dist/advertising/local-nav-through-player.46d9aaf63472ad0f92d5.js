"use strict";(self.cmlsAmpUtils=self.cmlsAmpUtils||[]).push([[353],{8102:function(e,t,r){r.r(t),r(8858),r(1318),r(3228),((e,t,r)=>{const{detectPlayer:a,waitForPlayer:i,navigateThroughPlayer:n,addAfterPageFrame:d}=t._CMLS.libs.playerTools,{domReady:s}=t._CMLS.libs,l="navThroughPlayer",o=new t._CMLS.Logger("NAV THROUGH PLAYER 0.2"),u=t.document;if(!e)return void o.warn("jQuery not available");if(t._CMLS[l])return;function f(){this.updateAdIframe=e=>{if(e){if(!this.isSafeFrame(e))try{const t=[...e.contentWindow.document.querySelectorAll("a[href]")];if(!t?.length)return void o.debug("No relevant links in iframe.",e);t.forEach((e=>{this.updateLink(e)}))}catch(t){o.error("updateLinks failed!",e,t)}}else o.warn("updateAdIframe called without an iframe. This should never happen!")},this.updateLink=(r,a=!1)=>{if(!r?.href)return void o.warn("updateLink called without a link.",r);e(r).off(`.${l}`);const i=new URL(t.location.href).origin,n=new URL(r.href,i),d=n.origin;let s=r.getAttribute("target"),u=!1;if(d===i&&(u=!0,o.debug("Updating local link",r,r.href,n.href),r.setAttribute("href",n.href)),d.includes("doubleclick")){if(!n.searchParams.has("adurl"))return void o.warn("Found doubleclick link without an adurl parameter",r);const e=new URL(n.searchParams.get("adurl"),i);e.origin===i&&(n.searchParams.set("adurl",e.href),o.debug("Updating local, tracked link",r,r.href,n.href),r.setAttribute("href",n.href))}u&&(s||(o.debug('Setting target of local link to "_top"'),r.setAttribute("target","_top")),e(r).on(`click.${l}`,this.handleClick.bind(this)))},this.handleClick=e=>{e?.currentTarget?.href?a()&&(o.debug("Intercepting click."),e.preventDefault(),n(e.currentTarget.href)):o.warn("Received click event without a link?",e)},this.getAdFrames=(e=u)=>[...e.querySelectorAll('iframe[id^="google_ads_iframe"]:not([data-is-safeframe="true"]')],this.isSafeFrame=e=>{const t=e.getAttribute("src");return!(e.contentWindow&&!t?.includes("/safeframe/")&&"true"!==t?.getAttribute("data-is-safeframe")||(o.debug("Could not access iframe content, this is a safeframe we cannot process.",e),0))};const r=e=>{if(e.isEmpty)return;if(!e?.slot)return void o.warn("Caught an invalid render event",e);const t=e.slot,r=t.getSlotElementId();let a=u.getElementById(r);a&&("iframe"!==a?.tagName.toLowerCase()&&(a=a.querySelector('iframe[id^="google_ads_iframe"]'),!a||this.isSafeFrame(a))||(o.debug("Caught render event",r,t),this.updateAdIframe(a)))};this.getAdFrames().forEach((e=>{this.updateAdIframe(e)})),t._CMLS.adTag.addListener("slotRenderEnded",r.bind(this)),d((()=>{t._CMLS.adTag.removeListener("slotRenderEnded",r)}))}const c=()=>{t._CMLS[l]=new f};t?._CMLS?.adTag?c():t.addEventListener("cmls-adtag-loaded",(()=>c()))})(window?.jQuery,window.self)}}]);