"use strict";(self.cmlsAmpUtils=self.cmlsAmpUtils||[]).push([[353],{8102:function(e,t,r){r.r(t),r(6229),r(7330),r(2062),((e,t,r)=>{const{detectPlayer:a,waitForPlayer:i,navigateThroughPlayer:n,addAfterPageFrame:o}=t._CMLS.libs.playerTools,{domReady:s}=t._CMLS.libs,l="navThroughPlayer",d=new t._CMLS.Logger("NAV THROUGH PLAYER 0.2"),f=t.document;if(!e)return void d.warn("jQuery not available");if(t._CMLS[l])return;function c(){this.updateAdIframe=e=>{if(e){if(!this.isSafeFrame(e))try{const t=[...e.contentWindow.document.querySelectorAll("a[href]")];if(!t?.length)return void d.info("No relevant links in iframe.",e);t.forEach((e=>{this.updateLink(e)}))}catch(t){d.error("updateLinks failed!",e,t)}}else d.warn("updateAdIframe called without an iframe. This should never happen!")},this.updateLink=(r,a=!1)=>{if(!r?.href)return void d.info("updateLink called without a link.",r);e(r).off(`.${l}`);const i=new URL(t.location.href).origin,n=new URL(r.href,i),o=n.origin;let s=r.getAttribute("target"),f=!1;if(o===i&&(f=!0,d.info("Updating local link",r,r.href,n.href),r.setAttribute("href",n.href)),o.includes("doubleclick")){if(!n.searchParams.has("adurl"))return void d.warn("Found doubleclick link without an adurl parameter",r);const e=new URL(n.searchParams.get("adurl"),i);e.origin===i&&(n.searchParams.set("adurl",e.href),d.info("Updating local, tracked link",r,r.href,n.href),r.setAttribute("href",n.href))}f&&(s||(d.info('Setting target of local link to "_top"'),r.setAttribute("target","_top")),e(r).on(`click.${l}`,this.handleClick.bind(this)))},this.handleClick=e=>{e?.currentTarget?.href?a()&&(d.info("Intercepting click."),e.preventDefault(),n(e.currentTarget.href)):d.warn("Received click event without a link?",e)},this.getAdFrames=(e=f)=>[...e.querySelectorAll('iframe[id^="google_ads_iframe"]:not([data-is-safeframe="true"]')],this.isSafeFrame=e=>{const t=e.getAttribute("src");return!(e.contentWindow&&!t?.includes("/safeframe/")&&"true"!==t?.getAttribute("data-is-safeframe")||(d.warn("Could not access iframe content, this is a safeframe we cannot process.",e),0))};const r=e=>{if(e.isEmpty)return;if(!e?.slot)return void d.warn("Caught an invalid render event",e);const t=e.slot,r=t.getSlotElementId();let a=f.getElementById(r);a&&("iframe"!==a?.tagName.toLowerCase()&&(a=a.querySelector('iframe[id^="google_ads_iframe"]'),!a||this.isSafeFrame(a))||(d.info("Caught render event",r,t),this.updateAdIframe(a)))};this.getAdFrames().forEach((e=>{this.updateAdIframe(e)})),t._CMLS.adTag.addListener("slotRenderEnded",r.bind(this)),o((()=>{t._CMLS.adTag.removeListener("slotRenderEnded",r)}))}const u=()=>{t._CMLS[l]=new c};t?._CMLS?.adTag?u():t.addEventListener("cmls-adtag-loaded",(()=>u()))})(window?.jQuery,window.self)}}]);