"use strict";(self.cmlsAmpUtils=self.cmlsAmpUtils||[]).push([[696],{1920:function(e,t,s){s.r(t);var i=s(3942);(e=>{const{h:t,domReady:n,Logger:d,playerTools:a}=e.__CMLSINTERNAL.libs,{waitForPlayer:o,detectPlayer:l,addAfterPageFrame:h}=a,{scriptName:r,nameSpace:c,version:m,elementId:u}=i,g=new d(`${r} ${m}`);let p=e.self;[e.top,e.parent,e.self].some((e=>{if(e?._CMLS)return p=e,!0}));class I{elementId=u;slot=null;context=p;adTag=p.__CMLSINTERNAL.adTag;zIndexInterval;constructor(){this.elementId=u,this.context=p,this.adTag=p.__CMLSINTERNAL.adTag,this.stub=t("div",{id:`${this.elementId}-stub`}),this.inject()}refresh(){this.slot&&this.adTag?(g.info("Refreshing."),this.adTag.refresh(this.slot),this.updateZindex()):this.inject()}hasDiv(){return this.context.document.getElementById(this.elementId)}updateZindex(){const e=this.context.document.getElementById(this.elementId),t=this.context.document.getElementById("playerbar"),s=this.context.document.querySelector('iframe[name="pwm_pageFrame"]');if(!e)return;let i=t&&this.context.getComputedStyle(t)?.zIndex||0;i&&(i=parseInt(i)||0);let n=s&&this.context.getComputedStyle(s)?.zIndex||0;n&&(n=parseInt(n)||0);let d=this.context.getComputedStyle(e)?.zIndex||0;d&&(d=parseInt(d)||0);let a=i-1;this.context.matchMedia("(min-width: 800px)").matches&&"tunegenie"===l()&&(a=i+1),d!=a&&(g.debug("Adjusting ad div z-index",{currentZ:d,newZ:a}),e.style.setProperty("z-index",a,"important"))}inject(){if(e.matchMedia("(min-width: 800px)").matches&&"tunegenie"!==l())return g.debug("No TuneGenie player detected on desktop, wait for player before re-injecting."),void o().then((()=>{"tunegenie"===l()&&this.inject()}));if(!this.hasDiv()){g.debug("Injecting");const i=t("div",{id:this.elementId});o().then((()=>{i.classList.add("player-active",`player-${l()}`),"tunegenie"===l()&&(this.zIndexInterval=setInterval(this.updateZindex.bind(this),1e3))})),Promise.all([s.e(275),s.e(180)]).then(s.bind(s,1138)).then((e=>{e?.default?.use&&e.default.use({target:this.context.document.body})})),this.context.document.body.append(i,this.stub),this.context.document.body.classList.add("has-sticky-320x50"),g.info("Injected"),this.adTag.queue((()=>{this.adTag.getSlots().forEach((e=>{e.getSlotElementId()===this.elementId&&(g.info("Destroying existing slot."),this.adTag.destroySlots([e]))})),g.info("Defining new ad slot",this.elementId),this.slot=this.adTag.defineSlot({adUnitPath:`${this.context.__CMLSINTERNAL.adPath}/stickyBottomAd`,size:[[120,60],[300,50],[320,50]],sizeMap:[[[800,0],[[120,60],[300,50],[320,50]]],[[0,0],[[300,50],[320,50]]]],div:this.elementId,collapse:!0,targeting:{pos:"playersponsorlogo"},prebid:!0}),this.slot?(this.adTag.addListener("slotRenderEnded",(t=>{if(!t.isEmpty&&t.slot===this.slot&&(g.debug("Slot returned creative."),this.context!==e.self)){g.debug("Inside iframe, adding stub to inside page.");const t=this.stub.cloneNode(!0),s=p.getComputedStyle(this.stub);for(let e=0;e<s.length;e++)t.style[s[e]]=s.getPropertyValue(s[e]);e.self.document.body.append(t),e.self.document.body.classList.add("has-sticky-320x50")}})),this.adTag.display(this.elementId,this.adTag.isInitialLoadDisabled())):g.warn("Slot creation failed!")}))}}}const f=()=>{p?.__CMLSINTERNAL?.[c]?.hasDiv()?p.__CMLSINTERNAL[c].refresh():p.__CMLSINTERNAL[c]=new I};e?.__CMLSINTERNAL?.adPath?f():e.addEventListener("cmls-adpath-discovered",(()=>{f()}))})(window.self)}}]);