"use strict";(self.cmlsAmpUtils=self.cmlsAmpUtils||[]).push([[567],{9664:function(e,t,r){r.r(t),r(4603),r(7566),r(8721),((e,t,r)=>{const{Logger:a,domReady:i,playerTools:n}=t.__CMLSINTERNAL.libs,{detectPlayer:d,waitForPlayer:s,navigateThroughPlayer:l,addAfterPageFrame:o}=n,u="navThroughPlayer",f=new a("NAV THROUGH PLAYER 0.2"),c=t.document;if(!e)return void f.warn("jQuery not available");if(t.__CMLSINTERNAL[u])return;function h(){this.updateAdIframe=e=>{if(e){if(!this.isSafeFrame(e))try{const t=[...e.contentWindow.document.querySelectorAll("a[href]")];if(!t?.length)return void f.debug("No relevant links in iframe.",e);t.forEach((e=>{this.updateLink(e)}))}catch(t){f.error("updateLinks failed!",e,t)}}else f.warn("updateAdIframe called without an iframe. This should never happen!")},this.updateLink=(r,a=!1)=>{if(!r?.href)return void f.warn("updateLink called without a link.",r);e(r).off(`.${u}`);const i=new URL(t.location.href).origin,n=new URL(r.href,i),d=n.origin;let s=r.getAttribute("target"),l=!1;if(d===i&&(l=!0,f.debug("Updating local link",r,r.href,n.href),r.setAttribute("href",n.href)),d.includes("doubleclick")){if(!n.searchParams.has("adurl"))return void f.warn("Found doubleclick link without an adurl parameter",r);const e=new URL(n.searchParams.get("adurl"),i);e.origin===i&&(n.searchParams.set("adurl",e.href),f.debug("Updating local, tracked link",r,r.href,n.href),r.setAttribute("href",n.href))}l&&(s||(f.debug('Setting target of local link to "_top"'),r.setAttribute("target","_top")),e(r).on(`click.${u}`,this.handleClick.bind(this)))},this.handleClick=e=>{e?.currentTarget?.href?d()&&(f.debug("Intercepting click."),e.preventDefault(),l(e.currentTarget.href)):f.warn("Received click event without a link?",e)},this.getAdFrames=(e=c)=>[...e.querySelectorAll('iframe[id^="google_ads_iframe"]:not([data-is-safeframe="true"]')],this.isSafeFrame=e=>{const t=e.getAttribute("src");return!(e.contentWindow&&!t?.includes("/safeframe/")&&"true"!==t?.getAttribute("data-is-safeframe")||(f.debug("Could not access iframe content, this is a safeframe we cannot process.",e),0))};const r=e=>{if(e.isEmpty)return;if(!e?.slot)return void f.warn("Caught an invalid render event",e);const t=e.slot,r=t.getSlotElementId();let a=c.getElementById(r);a&&("iframe"!==a?.tagName.toLowerCase()&&(a=a.querySelector('iframe[id^="google_ads_iframe"]'),!a||this.isSafeFrame(a))||(f.debug("Caught render event",r,t),this.updateAdIframe(a)))};this.getAdFrames().forEach((e=>{this.updateAdIframe(e)})),t.__CMLSINTERNAL.adTag.addListener("slotRenderEnded",r.bind(this)),o((()=>{t.__CMLSINTERNAL.adTag.removeListener("slotRenderEnded",r)}))}const g=()=>{t.__CMLSINTERNAL[u]=new h};t?.__CMLSINTERNAL?.adTag?g():t.addEventListener("cmls-adtag-loaded",(()=>g()))})(window?.jQuery,window.self)}}]);