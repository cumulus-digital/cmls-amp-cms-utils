(self.cmlsAmpUtils=self.cmlsAmpUtils||[]).push([[536],{370:function(){((t,e)=>{const{h:n,Fragment:o,Logger:i,lodash:a,playerTools:r,triggerEvent:d}=t.__CMLSINTERNAL.libs,{throttle:s,debounce:l}=a,c="pushdownHandler",u="gpt-pushdown",h=new i("PUSHDOWN HANDLER 0.1"),m=t.document;let g;t.__CMLSINTERNAL[c]||(t.__CMLSINTERNAL[c]=new function(){const e=m.getElementById(`${u}-container`),o=e.shadowRoot.getElementById(u),i=(e.shadowRoot.getElementById("close"),e.shadowRoot.getElementById("timer"));let a=15e3;this.detectCreative=t=>{if(!t)return h.warn("No iframe supplied to detectCreative"),!1;if(!t.contentWindow)return h.warn("Could not get slot iframe window, is this a safe frame?"),!1;const e=t.contentWindow.document;return e.querySelector("#vpContainer")?"Vast":e.querySelector("video")?"Video":!(!e.querySelector(".img_ad")&&!e.querySelector('img[src]:not([width="1"]):not([width="0"])'))&&"Image"},this.handleVast=t=>{h.debug("Handling VAST creative.");const e=t.contentWindow,n=e.document.getElementById("vpContainer");return n?new e.VASTPlayer(n)?void 0:(h.warn("Could not generate VASTPlayer from vpContainer"),!1):(h.warn("Attempted to handle VAST creative, but no VAST content was found."),!1)},this.handleVideo=t=>{h.debug("Handling basic video creative.");const n=t.contentWindow.document.querySelector("video");if(n.querySelector("source"),!n)return h.warn("Attempted to handle video creative, but no video tag could be found."),!1;if(!n?.canPlayType)return h.warn("Client browser does not support this video format."),!1;const o={controls:!1,muted:!0,playsinline:!0,autoplay:!1};for(key in o)n.setAttribute(key,o[key]);n.addEventListener("mouseover",(()=>n.setAttribute("muted",!1))),n.addEventListener("mouseout",(()=>n.setAttribute("muted",!0))),n.addEventListener("playing",(()=>d(i,"cmls.start",{duration:n.duration}))),n.addEventListener("ended",(()=>d(e,"cmls.hide"))),n.addEventListener("canplaythrough",(()=>d(e,"cmls.show")))},this.handleImage=o=>{h.debug("Handling image creative");const i=o.contentWindow.document,r=n("style",null,'\n\t\t\t\ta { display: block; }\n\t\t\t\timg[src]:not([width="1"]):not([width="0"]) {\n\t\t\t\t\tdisplay: block;\n\t\t\t\t\twidth: auto !important;\n\t\t\t\t\theight: auto !important;\n\t\t\t\t\tmax-width: 100%;\n\t\t\t\t\tobject-fit: cover;\n\t\t\t\t}\n\t\t\t');i.body.append(r);const s=i.querySelector('img[src]:not([width="1"]):not([width="0"])'),l=t.getComputedStyle(s);h.debug(t.getComputedStyle(i.body).height,l.height);const c=parseInt(l?.height)||s.offsetHeight;e.style.setProperty("--height",c?`${c}px`:"56.25%"),a=15;const u=s.getAttribute("alt")?.match(/timeout=(\d+)/i);u?.length&&(a=u[1]),t.__CMLSINTERNAL?.navThroughPlayer&&[...i.querySelectorAll("a[href]")].forEach((e=>t.__CMLSINTERNAL?.navThroughPlayer.updateLink(e))),d(e,"cmls.display",{duration:a})},this.process=t=>{if(h.debug("Received process request.",t),g=t,!t.getResponseInformation())return void h.warn("Slot did not load creative.");const e=o.querySelector("iframe"),n=this.detectCreative(e);n?"function"==typeof this[`handle${n}`]?this[`handle${n}`](e):h.warn("Received a creative type we cannot handle?",n):h.warn("Could not detect creative.")},e.addEventListener("cmls.hide",(n=>{const a=n?.detail?.callback||null;h.info("Hiding.",{callback:a}),d(i,"cmls.reset"),o.classList.remove("show"),o.addEventListener("transitionend",(()=>{e.setAttribute("aria-hidden","true"),g?.addService&&t.googletag.destroySlots([g]),"function"==typeof a&&a.call(this)}).bind(this))})),e.addEventListener("cmls.display",(t=>{duration=t?.detail?.duration||15,callback=t?.detail?.callback||null,h.info("Displaying.",{duration:duration,callback:callback}),o.classList.add("show"),e.removeAttribute("aria-hidden"),d(i,"cmls.start",{duration:duration,callback:callback})})),i.addEventListener("cmls.start",(t=>{const n=t?.detail?.duration||15,o=t?.detail?.callback||null;h.info("Starting timer",{duration:n,callback:o}),i.style.setProperty("--time",`${n}s`),i.classList.add("start");const a=()=>{d(e,"cmls.hide"),"function"==typeof o&&o.call(this),i.removeEventListener("transitionend",a)};i.addEventListener("transitionend",a.bind(this))})),i.addEventListener("cmls.reset",(t=>{const e=t?.detail?.callback||null;i.classList.remove("start"),i.style.removeProperty("--time"),"function"==typeof e&&e.call(this)}))})})(window.self)}}]);