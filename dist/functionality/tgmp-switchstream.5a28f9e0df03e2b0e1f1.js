(self.cmlsAmpUtils=self.cmlsAmpUtils||[]).push([[710],{522:function(){((t,e,a)=>{const{detectPlayer:r,waitForPlayer:s,addAfterPageFrame:m}=e._CMLS.libs.playerTools,i=(e._CMLS.libs.domReady,"tgmpSwitchStream"),c=new e._CMLS.Logger("TGMP SWITCHSTREAM 0.6"),n=[".tgmp-switchstream",".tgmp-switchstream a",'[alt*="tgmp-switchstream"]','[alt*="tgmp-switchstream"] a','[href*="tgmp-switchstream"]','[href*="tgmp-switchstream"] a'];t?(e._CMLS.switchStreamInstance=new class{key="tgmp-switchstream";constructor(){e.top.tgmp_default_brand=e.top.tgmp_default_brand||""+e.top?.tgmp?.options?.brand,e.top.tgmp_default_theme=e.top.tgmp_default_theme||""+e.top?.tgmp?.options?.theme}getCommandSource(t){return t?.className?.includes(this.key)?"class":t?.getAttribute("alt")?.includes(this.key)?"alt":!!t?.href?.includes(key)&&"href"}parseCommand(t){const e=this.getCommandSource(t);if(!e)return!1;const a={brand:"",theme:"",autostart:!1},r=t.getAttribute(e);let s=r.match(/tgmp\-streamid\-([a-z0-9]+)/i),m=r.match(/tgmp\-theme-([\#a-z0-9]+)/i),i=r.match(/tgmp\-autostart/i);return s?.length>1&&(a.brand=s.pop()),m?.length>1&&(a.theme=m.pop()),i&&(a.autostart=!0),a}switch(t="",a="",s=!0,m="true"){r()||"function"==typeof e?.tgmp?.update?("[object Object]"===Object.prototype.toString.call(t)&&(m=t?.userInitStart||m,s=t?.autostart||s,a=t?.theme||a,t=t?.brand),!1===s&&(m="false"),t||(t=e.top.tgmp_default_brand),a||(a=e.top.tgmp_default_theme),c.info("Received stream switch request",{brand:t,theme:a,userInitStart:m}),e.tgmp.update({brand:t,theme:a,userInitStart:m})):c.warn("Switch stream request received without initialized player.")}},e._CMLS.switchStream=e._CMLS.switchStreamInstance.switch,e._CMLS.switchTGMPStream=(t="",a=!1,r="")=>{e._CMLS.switchStream(t,r,a)},s().then((()=>{t(e.document.body).off(`click.${i}`).on(`click.${i}`,n.join(","),(t=>{if(r()){t.preventDefault();const a=e._CMLS.switchStreamInstance.parseCommand(t.currentTarget);a&&(c.info("Received command",a),e._CMLS.switchStream(a))}})),m((()=>{t(e.document.body).off(`click.${i}`)}))}))):c.warn("jQuery not available")})(window?.jQuery,window.self)}}]);