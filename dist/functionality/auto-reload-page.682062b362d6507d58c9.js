"use strict";(self.cmlsAmpUtils=self.cmlsAmpUtils||[]).push([[800],{6100:function(t,i,e){e.r(i),e(560);const{detectPlayer:o,getPageWindow:s,addAfterPageFrame:n}=window._CMLS.libs.playerTools,a=new window._CMLS.Logger("AUTO-RELOAD PAGE 0.3");((t,i)=>{const e=t;e._CMLS=e._CMLS||{};class r{defaults={condition:"body.home",timeout:8};settings={};timer=null;timeout=null;active=!1;constructor(t=!1){t instanceof Object&&(a.info("Instantiated with options",t),this.settings=Object.assign(this.defaults,t),this.start())}checkCondition(){const t=s();return!!t?.document?.body?.matches(this.settings.condition)}start(t={}){!t instanceof Object?a.error("Received malformed options"):(this.settings=Object.assign(this.defaults,this.settings,t),this.stop(),this.checkCondition()?(this.timeout=new Date(Date.now()+6e4*this.settings.timeout),this.timer=setInterval((()=>this.tick()),1e3),this.active=!0,a.info("Timer initialized",this.timeout?.toISOString()||this.timeout.toUTCString())):a.info("Condition check failed, timer will not start"))}stop(){this.timer&&(a.info("Stopping timer"),clearInterval(this.timer),this.timer=null,this.active=!1)}tick(){const t=new Date;Math.random()>.95&&a.debug({headerLength:1/0,message:["Checking timer (This notice is random to reduce noise)",[t.toLocaleString(),this.timeout.toLocaleString()]]}),t.getTime()>this.timeout.getTime()&&this.fire()}fire(){if(this.stop(),!this.checkCondition())return void a.info("Condition check failed, timer will not fire or restart.");const i=e.location.protocol,n=e.location.hostname;let r=e.location.href.replace(`${i}//${n}`,"");if(r.length<1&&(r="/"),t._CMLS.autoRefreshAdsExclusion.length&&(t._CMLS.autoRefreshAdsExclusion.length=0),o()){const t=s();if(t.tgmp)return a.info("Reloading page through TuneGenie Player."),void t.tgmp.updateLocation(r)}e.location.href=r}push(t){a.info("Received request after initialization.",t),this.start(t)}}const c=new r;e._CMLS.autoReload=new r(e._CMLS.autoReload.pop()),n((()=>{c.stop()}))})(window.self)}}]);