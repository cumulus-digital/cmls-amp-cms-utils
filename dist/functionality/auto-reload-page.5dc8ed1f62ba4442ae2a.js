"use strict";(self.cmlsAmpUtils=self.cmlsAmpUtils||[]).push([[800],{6100:function(e,t,o){o.r(t),o(560);const{navigateThroughPlayer:n}=o(6353),{detectPlayer:i,addAfterPageFrame:s}=window._CMLS.libs.playerTools,r=new window._CMLS.Logger("AUTO-RELOAD PAGE 0.4");((e,t)=>{const o=e;o._CMLS=o._CMLS||{};class a{defaults={condition:"body.home",timeout:8};settings={};timer=null;timeout=null;active=!1;constructor(e=!1){e instanceof Object&&(r.info("Instantiated with options",e),this.settings=Object.assign(this.defaults,e),this.start())}checkCondition(){const t=e.self.location.pathname;return!!(t.length<1||"/"===t)}start(t={}){!t instanceof Object?r.error("Received malformed options"):(this.settings=Object.assign(this.defaults,this.settings,t),this.stop(),this.checkCondition()?(this.timeout=new Date(Date.now()+6e4*this.settings.timeout),this.timer=setInterval((()=>this.tick()),1e3),this.active=!0,r.info("Timer initialized",this.timeout?.toISOString()||this.timeout.toUTCString())):r.info("Condition check failed, timer will not start",{tag:e.self.document.body,must_match:this.settings.condition}))}stop(){this.timer&&(r.info("Stopping timer"),clearInterval(this.timer),this.timer=null,this.active=!1)}tick(){const e=new Date;Math.random()>.95&&r.debug({headerLength:1/0,message:["Checking timer (This notice is random to reduce noise)",[e.toLocaleString(),this.timeout.toLocaleString()]]}),e.getTime()>this.timeout.getTime()&&this.fire()}fire(){if(this.stop(),!this.checkCondition())return void r.info("Condition check failed, timer will not fire or restart.");const t=o.location.protocol,s=o.location.hostname;let a=o.location.href.replace(`${t}//${s}`,"");if(a.length<1&&(a="/"),"function"==typeof e._CMLS?.clearAutoRefreshAdsExclusion&&e._CMLS.clearAutoRefreshAdsExclusion(),i())return r.info("Reloading page through player."),void n(a);o.location.href=a}push(e){r.info("Received request after initialization.",e),this.start(e)}}const d=new a;o._CMLS.autoReload=new a(o._CMLS.autoReload.pop()),s((()=>{d.stop()}))})(window.self)},3583:function(e,t,o){o.d(t,{ZP:function(){return s}}),o(560);const n={},i=(e,t,o)=>{e/=255,t/=255,o/=255;const n=Math.max(e,t,o),i=n-Math.min(e,t,o),s=0===i?0:i&&n===e?(t-o)/i:n===t?2+(o-e)/i:4+(e-t)/i;return[60*(s<0?s+6:s),n&&i/n*100,100*n]};class s{background=null;foreground=null;#e=null;constructor(e){n[e]?(this.background=n[e]?.background,this.foreground=n[e]?.foreground):(this.background=(()=>{let e,t=!1;for(;!t;){e=Math.floor(16777215*Math.random());const o=i.apply(void 0,[e>>16&255,e>>8&255,255&e]);o[0]>25&&o[0]<330&&(t=!0)}return("000000"+e.toString(16)).slice(-6)})(),this.foreground=(e=>{const t=parseInt(e,16);return(t>>16&255)/255*.2126+(t>>8&255)/255*.7152+(t>>0&255)/255*.0722>.6?"000000":"FFFFFF"})(this.background),n[e]={background:this.background,foreground:this.foreground}),this.header=[`%c ${e} %c`,`background: #${this.background}; color: #${this.foreground}`]}timestamp(){return(new Date)?.toISOString()||(new Date).toUTCString()}resolveMessage(e){let t=e,o=160;return Array.isArray(e)&&e.length>0&&e[0]?.message&&e[0]?.headerLength&&(t=e[0].message,o=e[0].headerLength),{message:t,headerLength:o}}smallString(e,t=160){return e?(e instanceof Element?e.innerHTML:e.toString()).substring(0,t):e}displayHeader(e,t,o=160){let n=[{debug:"ðŸž",info:"â„¹ï¸",warn:"ðŸš¸",error:"ðŸš¨"}?.[e]];t&&(Array.isArray(t)?n.push(this.smallString(t.map((e=>{if("string"!=typeof e){const t=new WeakSet;return JSON.stringify(e,((e,o)=>{if("object"==typeof o&&null!==o){if(t.has(o))return;t.add(o)}return o}))}return e})).join(" || "),o)):n.push(this.smallString(t,o))),this.header.length>1?window.top.console.groupCollapsed.apply(window.top.console,[`${this.header[0]} %c${n.join(" ")}`,this.header[1],"",`color: ${{debug:"#777777",info:"darkblue",warn:"darkgoldenrod",error:"darkred"}?.[e]}`,""]):window.top.console.groupCollapsed.apply(window.top.console,[...this.header,...n])}displayFooter(){window.top.console.debug("TIMESTAMP:",this.timestamp()),window.top.console.trace(),window.top.console.groupEnd()}logMessage(e,t,o=160){if("object"!=typeof console||!console.groupCollapsed)return!1;let n=!1;try{(/(1|true|yes)/i.test(window.sessionStorage.getItem("cmlsDebug"))||/cmlsDebug/i.test(window.document.cookie))&&(n=!0),window.location.search.indexOf("cmlsDebug")>=0&&(n=!0)}catch(e){}("debug"!==e||window?._CMLS?.debug||n)&&(this.displayHeader(e,t,o),window.top.console.debug(t),this.displayFooter())}info(...e){let{message:t,headerLength:o}=this.resolveMessage(e);this.logMessage("info",t,o)}debug(...e){let{message:t,headerLength:o}=this.resolveMessage(e);this.logMessage("debug",t,o)}warn(...e){let{message:t,headerLength:o}=this.resolveMessage(e);this.logMessage("warn",t,o)}error(...e){let{message:t,headerLength:o}=this.resolveMessage(e);this.logMessage("error",t,o)}}},96:function(e,t){t.Z=e=>{"loading"!==window.self.document.readyState?e():window.self.document.addEventListener("DOMContentLoaded",e)}},6353:function(e,t,o){o.r(t),o.d(t,{addAfterPageFrame:function(){return y},detectPlayer:function(){return l},getPlayerFrame:function(){return w},isInIframe:function(){return g},navigateThroughPlayer:function(){return c},waitForPlayer:function(){return u}}),o(560);var n=o(9217),i=o(96);const s=new(o(3583).ZP)("PlayerTools");let r=null,a=0,d={tunegenie:"pwm_pageFrame",cumulus:"cmls_siteframe"};window._CMLS=window._CMLS||{},window._CMLS.playerTools=window._CMLS.playerTools||{};const l=()=>{if(r)return r;let e=!1;return[window.self,window.parent,window.top].some((t=>t?.tgmp||window.frames[d.tunegenie]?(e="tunegenie",!0):window.frames[d.cumulus]?(e="cumulus",!0):void 0)),s.debug("HASPLAYER?",e),e?(document.body.classList.add("has-detected-player"),document.body.classList.add(`player-${e}`),r=e,r):(y(l),!1)};window._CMLS.playerTools.detectPlayer=l;const c=e=>{const t=l();"tunegenie"===t&&window.tgmp.updateLocation(e),"cumulus"===t&&window.cmls_player.updateLocation(e)};window._CMLS.playerTools.navigateThroughPlayer=c;const u=()=>{const e=(t,o)=>{if(l())(0,n.Z)(window,"cmls-player-detected",r),t(l());else{if(a>20)return void t(!1);a++,setTimeout(e.bind(void 0,t,o),500)}};return new Promise(e)};window._CMLS.playerTools.waitForPlayer=u;const w=()=>{let e=!1;return[window.self,window.parent,window.top].some((t=>{if(Object.values(d).includes(t.name))return e=t,t;let o=(e=>e.document.querySelector(Object.values(d).map((e=>`iframe[name="${e}"]`)).join(",")))(t);return o?.contentWindow?(e=o.contentWindow,o.contentWindow):void 0})),e?.document?e:window.self};window._CMLS.playerTools.getPlayerFrame=w;const g=()=>window.self!==window.top||"pwm_pageFrame"===window.self.name;window._CMLS.playerTools.isInIframe=g;const h=[];let m=!1,f=!1;const p=new MutationObserver(((e,t)=>{const o=()=>{for(const e of h)"function"==typeof e&&e();p.disconnect()};for(const t of e)if("childList"===t.type){let e;if([window.top,window.parent,window.self].some((t=>{if(Object.values(d).some((e=>t?.frames?.[e])))return e=t,!0})),e){const e=l();"tunegenie"===e&&(f=!0),"cumulus"===e&&document.body.classList.contains("iframe-loaded")&&(f=!0),f&&o()}}}));(0,i.Z)((()=>{let e=!1;[window.self,window.parent,window.top].some((t=>t?.tgmp||window.frames[d.tunegenie]?(e="tunegenie",!0):window.frames[d.cumulus]?(e="cumulus",!0):void 0)),e&&("tunegenie"===e||"cumulus"===e&&document.body.classList.contains("iframe-loaded"))&&(s.debug("Page loaded with active page frame"),m=!0),p.observe(window.top.document.body,{childList:!0})}));const y=e=>{"function"==typeof e&&h.push(e)};window._CMLS.playerTools.addAfterPageFrame=y},9217:function(e,t,o){function n(e,t,o){let n;window.document.createEvent?(n=window.document.createEvent("CustomEvent"),n.initCustomEvent(t,!0,!0,o)):n=new CustomEvent(t,{detail:o}),e.dispatchEvent(n)}o.d(t,{Z:function(){return n}})}}]);